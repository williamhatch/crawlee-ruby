开始从 36kr 抓取投资事件数据...
[2025-05-28 17:35:02] INFO: 开始运行爬虫，并发数: 1
[2025-05-28 17:35:07] WARN: 提取响应头失败: undefined method `[]' for #<Ferrum::Network::Exchange @id="16880.132" @intercepted_request=nil @request=#<Ferrum::Network::Request:0x00000001094a2338 @params={"requestId"=>"16880.132", "loaderId"=>"5BACFA2EB1B8FC030FF027EC86930BDD", "documentURL"=>"https://36kr.com/iframe/login", "request"=>{"url"=>"https://staticx.36krcdn.com/36kr-web/static/iframe-login.3d88dda1.js", "method"=>"GET", "headers"=>{"sec-ch-ua-platform"=>"\"macOS\"", "Referer"=>"https://36kr.com/", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/136.0.0.0 Safari/537.36", "sec-ch-ua"=>"\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"", "sec-ch-ua-mobile"=>"?0", ":authority"=>"staticx.36krcdn.com", ":method"=>"GET", ":path"=>"/36kr-web/static/iframe-login.3d88dda1.js", ":scheme"=>"https", "accept"=>"*/*", "accept-encoding"=>"gzip, deflate, br, zstd", "accept-language"=>"zh-CN,zh;q=0.9", "referer"=>"https://36kr.com/", "sec-fetch-dest"=>"script", "sec-fetch-mode"=>"no-cors", "sec-fetch-site"=>"cross-site", "sec-fetch-storage-access"=>"active", "user-agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/136.0.0.0 Safari/537.36"}, "mixedContentType"=>"none", "initialPriority"=>"Low", "referrerPolicy"=>"strict-origin-when-cross-origin", "isSameSite"=>false}, "timestamp"=>1151590.936905, "wallTime"=>1748424907.878839, "initiator"=>{"type"=>"script", "stack"=>{"callFrames"=>[{"functionName"=>"n.e", "scriptId"=>"35", "url"=>"https://staticx.36krcdn.com/36kr-web/static/runtime.05394f4b.js", "lineNumber"=>0, "columnNumber"=>10218}, {"functionName"=>"component", "scriptId"=>"36", "url"=>"https://staticx.36krcdn.com/36kr-web/static/app.69714310.js", "lineNumber"=>1, "columnNumber"=>1256392}, {"functionName"=>"", "scriptId"=>"36", "url"=>"https://staticx.36krcdn.com/36kr-web/static/app.69714310.js", "lineNumber"=>1, "columnNumber"=>1642538}, {"functionName"=>"t.default.NotFound", "scriptId"=>"36", "url"=>"https://staticx.36krcdn.com/36kr-web/static/app.69714310.js", "lineNumber"=>1, "columnNumber"=>1642399}, {"functionName"=>"", "scriptId"=>"36", "url"=>"https://staticx.36krcdn.com/36kr-web/static/app.69714310.js", "lineNumber"=>1, "columnNumber"=>1642847}, {"functionName"=>"n", "scriptId"=>"35", "url"=>"https://staticx.36krcdn.com/36kr-web/static/runtime.05394f4b.js", "lineNumber"=>0, "columnNumber"=>570}, {"functionName"=>"a", "scriptId"=>"35", "url"=>"https://staticx.36krcdn.com/36kr-web/static/runtime.05394f4b.js", "lineNumber"=>0, "columnNumber"=>429}, {"functionName"=>"t", "scriptId"=>"35", "url"=>"https://staticx.36krcdn.com/36kr-web/static/runtime.05394f4b.js", "lineNumber"=>0, "columnNumber"=>292}, {"functionName"=>"", "scriptId"=>"36", "url"=>"https://staticx.36krcdn.com/36kr-web/static/app.69714310.js", "lineNumber"=>1, "columnNumber"=>46}]}}, "redirectHasExtraInfo"=>false, "type"=>"Script", "frameId"=>"72A1DD66682A7A8CD41F990C33AE7599", "hasUserGesture"=>false}, @request={"url"=>"https://staticx.36krcdn.com/36kr-web/static/iframe-login.3d88dda1.js", "method"=>"GET", "headers"=>{"sec-ch-ua-platform"=>"\"macOS\"", "Referer"=>"https://36kr.com/", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/136.0.0.0 Safari/537.36", "sec-ch-ua"=>"\"Chromium\";v=\"136\", \"Google Chrome\";v=\"136\", \"Not.A/Brand\";v=\"99\"", "sec-ch-ua-mobile"=>"?0", ":authority"=>"staticx.36krcdn.com", ":method"=>"GET", ":path"=>"/36kr-web/static/iframe-login.3d88dda1.js", ":scheme"=>"https", "accept"=>"*/*", "accept-encoding"=>"gzip, deflate, br, zstd", "accept-language"=>"zh-CN,zh;q=0.9", "referer"=>"https://36kr.com/", "sec-fetch-dest"=>"script", "sec-fetch-mode"=>"no-cors", "sec-fetch-site"=>"cross-site", "sec-fetch-storage-access"=>"active", "user-agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/136.0.0.0 Safari/537.36"}, "mixedContentType"=>"none", "initialPriority"=>"Low", "referrerPolicy"=>"strict-origin-when-cross-origin", "isSameSite"=>false}> @response=#<Ferrum::Network::Response @params={"requestId"=>"16880.132", "loaderId"=>"5BACFA2EB1B8FC030FF027EC86930BDD", "timestamp"=>1151590.983349, "type"=>"Script", "response"=>{"url"=>"https://staticx.36krcdn.com/36kr-web/static/iframe-login.3d88dda1.js", "status"=>200, "statusText"=>"", "headers"=>{"x-request-ip"=>"118.193.105.115", "x-tt-logid"=>"202505201953305F3AC318C28B4001CFCE", "x-request-id"=>"8c637cc525dc94e72136e7c9c9b12161", "x-bdcdn-cache-status"=>"TCP_HIT", "content-encoding"=>"br", "age"=>"682897", "access-control-allow-methods"=>"GET,POST,PUT,DELETE", "nw-session-id"=>"202505201953305F3AC318C28B4001CFCE67268032b", "server-timing"=>"inner; dur=88", "date"=>"Wed, 28 May 2025 09:35:07 GMT", "content-type"=>"application/javascript", "last-modified"=>"Tue, 20 May 2025 11:53:31 GMT", "vary"=>"Accept-Encoding", "x-tt-trace-host"=>"013579af4165811117a1bb8927ff117499b406ff57b9bdd0a43f9f6d94f1fe76560701c00d8518590d7c0927c7d59a91d8d33cc55989f88b78bcbdbf1d2298074e9e4cbcff5f69b53239fb7dc74864acd181e30da036554c827ff59496f6643188efd959db8225e5048fdba267f1fccdfd", "cache-control"=>"max-age=31536000", "nw-session-trace"=>"2025-05-20T19:53:31.064389806+08:00 78", "x-response-date"=>"Tue, 20 May 2025 19:53:31 GMT", "x-tt-trace-tag"=>"id=5", "via"=>"cache04.hbczct03", "x-exception-info"=>"rate limit by bandwidth limit", "access-control-allow-origin"=>"*", "x-tt-trace-id"=>"20250520195330a96979aeaf990463D0B6", "content-length"=>"3275", "x-powered-by"=>"ImageX", "server"=>"Byte-nginx", "x-response-cinfo"=>"118.193.105.115", "x-response-cache"=>"edge_hit"}, "mimeType"=>"application/javascript", "charset"=>"", "connectionReused"=>true, "connectionId"=>228, "remoteIPAddress"=>"127.0.0.1", "remotePort"=>7890, "fromDiskCache"=>false, "fromServiceWorker"=>false, "fromPrefetchCache"=>false, "encodedDataLength"=>844, "timing"=>{"requestTime"=>1151590.938578, "proxyStart"=>-1, "proxyEnd"=>-1, "dnsStart"=>-1, "dnsEnd"=>-1, "connectStart"=>-1, "connectEnd"=>-1, "sslStart"=>-1, "sslEnd"=>-1, "workerStart"=>-1, "workerReady"=>-1, "workerFetchStart"=>-1, "workerRespondWithSettled"=>-1, "sendStart"=>0.083, "sendEnd"=>0.127, "pushStart"=>0, "pushEnd"=>0, "receiveHeadersStart"=>44.056, "receiveHeadersEnd"=>44.145}, "responseTime"=>1748424907923.179, "protocol"=>"h2", "alternateProtocolUsage"=>"unspecifiedReason", "securityState"=>"secure", "securityDetails"=>{"protocol"=>"TLS 1.2", "keyExchange"=>"ECDHE_RSA", "keyExchangeGroup"=>"X25519", "cipher"=>"AES_128_GCM", "certificateId"=>0, "subjectName"=>"*.36krcdn.com", "sanList"=>["*.36krcdn.com", "36krcdn.com"], "issuer"=>"RapidSSL TLS RSA CA G1", "validFrom"=>1736726400, "validTo"=>1770595199, "signedCertificateTimestampList"=>[{"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"Google 'Xenon2026h1' log", "logId"=>"969764BF555897ADF743876837084277E9F03AD5F6A4F3366E46A43F0FCAA9C6", "timestamp"=>1736737385210, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"3045022100C13F5382E9E31B3B2484145352ADB43B3EA23B7E20537C74C0A660F69A8F959802200ACB8C061E68CF00268AE285B9C6A8FF2C794A52668FDF600E1425155C461DC4"}, {"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"DigiCert 'Wyvern2026h1'", "logId"=>"6411C46CA412ECA7891CA2022E00BCAB4F2807D41E3527ABEAFED503C97DCDF0", "timestamp"=>1736737385122, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"30450221008E5884FFF0FA2DF51B5C530FD3E37F3A5A9772511E5B46DEF79625CCC7BFB18E0220658F269D028BEA21D99827F60BD71BE9205561AF2F3443B104363C4EB13137A3"}, {"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"DigiCert 'Sphinx2026h1'", "logId"=>"499C9B69DE1D7CECFC36DECD8764A6B85BAF0A878019D15552FBE9EB29DDF8C3", "timestamp"=>1736737385142, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"3045022100E74E343E5E4575BEA615C206AB7B116546C7FD8130D07977F26F683EFE39667B02206800E02F2350DFC090B5348C21DED555617CADC8F28725E5392210C234CAFABE"}], "certificateTransparencyCompliance"=>"compliant", "serverSignatureAlgorithm"=>2052, "encryptedClientHello"=>false}}, "hasExtraInfo"=>true, "frameId"=>"72A1DD66682A7A8CD41F990C33AE7599"} @response={"url"=>"https://staticx.36krcdn.com/36kr-web/static/iframe-login.3d88dda1.js", "status"=>200, "statusText"=>"", "headers"=>{"x-request-ip"=>"118.193.105.115", "x-tt-logid"=>"202505201953305F3AC318C28B4001CFCE", "x-request-id"=>"8c637cc525dc94e72136e7c9c9b12161", "x-bdcdn-cache-status"=>"TCP_HIT", "content-encoding"=>"br", "age"=>"682897", "access-control-allow-methods"=>"GET,POST,PUT,DELETE", "nw-session-id"=>"202505201953305F3AC318C28B4001CFCE67268032b", "server-timing"=>"inner; dur=88", "date"=>"Wed, 28 May 2025 09:35:07 GMT", "content-type"=>"application/javascript", "last-modified"=>"Tue, 20 May 2025 11:53:31 GMT", "vary"=>"Accept-Encoding", "x-tt-trace-host"=>"013579af4165811117a1bb8927ff117499b406ff57b9bdd0a43f9f6d94f1fe76560701c00d8518590d7c0927c7d59a91d8d33cc55989f88b78bcbdbf1d2298074e9e4cbcff5f69b53239fb7dc74864acd181e30da036554c827ff59496f6643188efd959db8225e5048fdba267f1fccdfd", "cache-control"=>"max-age=31536000", "nw-session-trace"=>"2025-05-20T19:53:31.064389806+08:00 78", "x-response-date"=>"Tue, 20 May 2025 19:53:31 GMT", "x-tt-trace-tag"=>"id=5", "via"=>"cache04.hbczct03", "x-exception-info"=>"rate limit by bandwidth limit", "access-control-allow-origin"=>"*", "x-tt-trace-id"=>"20250520195330a96979aeaf990463D0B6", "content-length"=>"3275", "x-powered-by"=>"ImageX", "server"=>"Byte-nginx", "x-response-cinfo"=>"118.193.105.115", "x-response-cache"=>"edge_hit"}, "mimeType"=>"application/javascript", "charset"=>"", "connectionReused"=>true, "connectionId"=>228, "remoteIPAddress"=>"127.0.0.1", "remotePort"=>7890, "fromDiskCache"=>false, "fromServiceWorker"=>false, "fromPrefetchCache"=>false, "encodedDataLength"=>844, "timing"=>{"requestTime"=>1151590.938578, "proxyStart"=>-1, "proxyEnd"=>-1, "dnsStart"=>-1, "dnsEnd"=>-1, "connectStart"=>-1, "connectEnd"=>-1, "sslStart"=>-1, "sslEnd"=>-1, "workerStart"=>-1, "workerReady"=>-1, "workerFetchStart"=>-1, "workerRespondWithSettled"=>-1, "sendStart"=>0.083, "sendEnd"=>0.127, "pushStart"=>0, "pushEnd"=>0, "receiveHeadersStart"=>44.056, "receiveHeadersEnd"=>44.145}, "responseTime"=>1748424907923.179, "protocol"=>"h2", "alternateProtocolUsage"=>"unspecifiedReason", "securityState"=>"secure", "securityDetails"=>{"protocol"=>"TLS 1.2", "keyExchange"=>"ECDHE_RSA", "keyExchangeGroup"=>"X25519", "cipher"=>"AES_128_GCM", "certificateId"=>0, "subjectName"=>"*.36krcdn.com", "sanList"=>["*.36krcdn.com", "36krcdn.com"], "issuer"=>"RapidSSL TLS RSA CA G1", "validFrom"=>1736726400, "validTo"=>1770595199, "signedCertificateTimestampList"=>[{"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"Google 'Xenon2026h1' log", "logId"=>"969764BF555897ADF743876837084277E9F03AD5F6A4F3366E46A43F0FCAA9C6", "timestamp"=>1736737385210, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"3045022100C13F5382E9E31B3B2484145352ADB43B3EA23B7E20537C74C0A660F69A8F959802200ACB8C061E68CF00268AE285B9C6A8FF2C794A52668FDF600E1425155C461DC4"}, {"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"DigiCert 'Wyvern2026h1'", "logId"=>"6411C46CA412ECA7891CA2022E00BCAB4F2807D41E3527ABEAFED503C97DCDF0", "timestamp"=>1736737385122, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"30450221008E5884FFF0FA2DF51B5C530FD3E37F3A5A9772511E5B46DEF79625CCC7BFB18E0220658F269D028BEA21D99827F60BD71BE9205561AF2F3443B104363C4EB13137A3"}, {"status"=>"Verified", "origin"=>"Embedded in certificate", "logDescription"=>"DigiCert 'Sphinx2026h1'", "logId"=>"499C9B69DE1D7CECFC36DECD8764A6B85BAF0A878019D15552FBE9EB29DDF8C3", "timestamp"=>1736737385142, "hashAlgorithm"=>"SHA-256", "signatureAlgorithm"=>"ECDSA", "signatureData"=>"3045022100E74E343E5E4575BEA615C206AB7B116546C7FD8130D07977F26F683EFE39667B02206800E02F2350DFC090B5348C21DED555617CADC8F28725E5392210C234CAFABE"}], "certificateTransparencyCompliance"=>"compliant", "serverSignatureAlgorithm"=>2052, "encryptedClientHello"=>false}}> @error=nil> @unknown=false>
[2025-05-28 17:35:07] ERROR: 浏览器请求错误: no implicit conversion of Symbol into Integer
[2025-05-28 17:35:07] INFO: 爬虫运行完成，处理请求数: 1
